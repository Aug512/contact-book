(function(t){function e(e){for(var n,s,o=e[0],l=e[1],c=e[2],u=0,m=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==r[l]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},i=[];function s(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-0c1a0464":"d1f89747"}[t]+".js"}function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(t){var e=[],a=r[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise((function(e,n){a=r[t]=[e,n]}));e.push(a[2]=n);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=s(t);var c=new Error;i=function(e){l.onerror=l.onload=null,clearTimeout(u);var a=r[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",c.name="ChunkLoadError",c.type=n,c.request=i,a[1](c)}r[t]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/contact-book/",o.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"4dd0":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("transition",{attrs:{name:"fade"}},[t.confirmModalData.visibility?a("ConfirmModal"):t._e(),t.phoneNumberModalData.visibility?a("PhoneNumberModal"):t._e(),t.userDataModalData.visibility?a("UserDataModal"):t._e(),t.customFieldsModalData.visibility?a("CustomFieldsModal"):t._e(),t.newContactModalData.visibility?a("NewContactModal"):t._e()],1),a("router-view")],1)},i=[],s=a("5530"),o=a("2f62"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal__overlay"},[a("div",{staticClass:"modal__container"},[a("h3",{staticClass:"modal__title"},[t._v(t._s(t.confirmModalData.message))]),a("button",{ref:"confirmButton",staticClass:"modal__btn modal__btn--accept",on:{click:function(e){return t.setConfirmModalAns(!0)}}},[t._v(" Подтвердить ")]),a("button",{staticClass:"modal__btn modal__btn--decline",on:{click:function(e){return t.setConfirmModalAns(!1)}}},[t._v(" Отменить ")])])])},c=[],u={name:"ConfirmModal",computed:Object(s["a"])({},Object(o["c"])(["confirmModalData"])),methods:Object(s["a"])({},Object(o["b"])(["setConfirmModalAns"])),mounted:function(){this.$refs.confirmButton.focus()}},d=u,m=a("2877"),f=Object(m["a"])(d,l,c,!1,null,null,null),b=f.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal__overlay"},[a("div",{staticClass:"modal__container"},[a("h3",{staticClass:"modal__title"},[t._v(t._s(t.phoneNumberModalData.message))]),a("hr"),a("form",{staticClass:"modal__form",on:{submit:function(e){return e.preventDefault(),t.formSubmitHandler(e)}}},["add"===t.phoneNumberModalData.operation?a("label",{staticClass:"modal__label"},[a("p",{staticClass:"modal__description"},[t._v("Выберите тип номера:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.numberType,expression:"numberType"}],ref:"newNumberTypeSelect",staticClass:"modal__input modal__select",on:{input:function(e){return t.resetValidityInfo("newNumberTypeSelect")},change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.numberType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{disabled:"",value:""}},[t._v("Выберите один из вариантов")]),a("option",{attrs:{disabled:!!t.contactNumbers(t.currentContactIndex).mobile,title:t.contactNumbers(t.currentContactIndex).mobile?"Такой тип уже существует":null,value:"mobile"}},[t._v(" Мобильный ")]),a("option",{attrs:{disabled:!!t.contactNumbers(t.currentContactIndex).work,title:t.contactNumbers(t.currentContactIndex).work?"Такой тип уже существует":null,value:"work"}},[t._v(" Рабочий ")]),a("option",{attrs:{disabled:!!t.contactNumbers(t.currentContactIndex).home,title:t.contactNumbers(t.currentContactIndex).home?"Такой тип уже существует":null,value:"home"}},[t._v(" Домашний ")]),a("option",{attrs:{value:"other"}},[t._v("Другой")])]),a("small",{ref:"newNumberTypeSelectError",staticClass:"modal__error"})]):t._e(),a("label",{staticClass:"modal__label"},[a("p",{staticClass:"modal__description"},[t._v("Введите номер:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.number,expression:"number",modifiers:{number:!0}}],ref:"newNumberInput",staticClass:"modal__input",attrs:{type:"tel",placeholder:"Введите номер"},domProps:{value:t.number},on:{input:[function(e){e.target.composing||(t.number=t._n(e.target.value))},function(e){return t.resetValidityInfo("newNumberInput")}],blur:function(e){return t.$forceUpdate()}}}),a("small",{ref:"newNumberInputError",staticClass:"modal__error"})]),a("div",{staticClass:"modal__btnGroup"},[a("button",{staticClass:"modal__btn modal__btn--accept",attrs:{type:"submit"}},[t._v(" "+t._s("add"===t.phoneNumberModalData.operation?"Добавить":"Изменить")+" ")]),a("button",{staticClass:"modal__btn modal__btn--decline",attrs:{type:"button"},on:{click:function(e){return t.setPhoneNumberAns({ans:!1})}}},[t._v(" Отменить ")])])])])])},h=[],v=(a("c740"),a("4fad"),a("159b"),{name:"PhoneNumberModal",data:function(){return{numberType:"",number:""}},computed:Object(s["a"])({},Object(o["c"])(["phoneNumberModalData","contactNumbers","currentContactIndex"])),beforeMount:function(){this.number="add"===this.phoneNumberModalData.operation?"":this.phoneNumberModalData.number,this.numberType="add"===this.phoneNumberModalData.operation?"":this.phoneNumberModalData.numberType},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["setPhoneNumberAns"])),{},{formSubmitHandler:function(){"add"===this.phoneNumberModalData.operation?this.createNumber():this.updateNumber()},createNumber:function(){var t=[this.checkTypeValidity(),this.checkNumberValidity()];if(t.every((function(t){return t}))){var e={number:this.number,type:this.numberType};this.setPhoneNumberAns({ans:!0,formData:Object(s["a"])({},e)})}},updateNumber:function(){var t=this,e="add"===this.phoneNumberModalData.operation?[this.checkTypeValidity(),this.checkNumberValidity()]:[this.checkNumberValidity()];if(e.every((function(t){return t}))){var a={number:this.number,type:this.numberType};"other"===this.numberType&&(a.index=this.contactNumbers(this.currentContactIndex).others.findIndex((function(e){return e===t.phoneNumberModalData.number}))),this.setPhoneNumberAns({ans:!0,formData:Object(s["a"])({},a)})}},resetValidityInfo:function(t){this.$refs[t].classList.remove("valid","invalid"),this.$refs["".concat(t,"Error")].innerText=""},checkTypeValidity:function(){return this.numberType?(this.$refs.newNumberTypeSelect.classList.add("valid"),!0):(this.$refs.newNumberTypeSelect.classList.add("invalid"),this.$refs.newNumberTypeSelectError.innerText="Выберите один из вариантов",!1)},checkNumberValidity:function(){var t=this;if(!this.number)return this.$refs.newNumberInput.classList.add("invalid"),this.$refs.newNumberInputError.innerText="Поле не должно быть пустым",!1;var e=/[0-9]{5,}/;if(!e.test(this.number))return this.$refs.newNumberInput.classList.add("invalid"),this.$refs.newNumberInputError.innerText="Номер должен содержать не менее 5-ти цифр",!1;var a=Object.entries(this.contactNumbers(this.currentContactIndex)),n=[];return a.forEach((function(t){t[1]&&("others"===t[0]?t[1].forEach((function(t){return n.push(t)})):n.push(t[1]))})),n.some((function(e){return e===t.number}))?(this.$refs.newNumberInput.classList.add("invalid"),this.$refs.newNumberInputError.innerText="Такой номер уже существует",!1):(this.$refs.newNumberInput.classList.add("valid"),!0)}}),mounted:function(){"add"===this.phoneNumberModalData.operation?this.$refs.newNumberTypeSelect.focus():this.$refs.newNumberInput.focus()}}),_=v,y=Object(m["a"])(_,p,h,!1,null,null,null),C=y.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal__overlay"},[a("div",{staticClass:"modal__container"},[a("h3",{staticClass:"modal__title"},[t._v(t._s(t.userDataModalData.message))]),a("hr"),a("form",{staticClass:"modal__form",on:{submit:function(e){return e.preventDefault(),t.formSubmitHandler(e)}}},["add"===t.userDataModalData.operation?a("label",{staticClass:"modal__label"},[a("p",{staticClass:"modal__description"},[t._v("Выберите поле:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.fieldType,expression:"fieldType"}],ref:"newDataFieldType",staticClass:"modal__input modal__select",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.fieldType=e.target.multiple?a:a[0]},function(e){return t.resetValidityInfo("newDataFieldType")}]}},[a("option",{attrs:{disabled:"",value:""}},[t._v("Выберите один из вариантов")]),a("option",{attrs:{disabled:!!t.contactData(t.currentContactIndex).email,title:t.contactData(t.currentContactIndex).email?"Это поле уже существует":null,value:"email"}},[t._v(" E-mail ")]),a("option",{attrs:{disabled:!!t.contactData(t.currentContactIndex).url,title:t.contactData(t.currentContactIndex).url?"Это поле уже существует":null,value:"url"}},[t._v(" Веб-сайт ")]),a("option",{attrs:{disabled:!!t.contactData(t.currentContactIndex).birthday,title:t.contactData(t.currentContactIndex).birthday?"Это поле уже существует":null,value:"birthday"}},[t._v(" День рождения ")]),a("option",{attrs:{disabled:!!t.contactData(t.currentContactIndex).adress,title:t.contactData(t.currentContactIndex).adress?"Это поле уже существует":null,value:"adress"}},[t._v(" Адрес ")])]),a("small",{ref:"newDataFieldTypeError",staticClass:"modal__error"})]):t._e(),a("label",{ref:"dataValueInput",staticClass:"modal__label"},[""!==t.fieldType?a("p",{staticClass:"modal__description"},[t._v(" Укажите значение: ")]):t._e(),"email"===t.fieldType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.fieldValue,expression:"fieldValue"}],ref:"newEmailValue",staticClass:"modal__input",attrs:{type:"text",placeholder:"Введите e-mail"},domProps:{value:t.fieldValue},on:{input:[function(e){e.target.composing||(t.fieldValue=e.target.value)},function(e){return t.resetValidityInfo("newEmailValue")}]}}):t._e(),"url"===t.fieldType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.fieldValue,expression:"fieldValue"}],ref:"newUrlValue",staticClass:"modal__input",attrs:{type:"text",placeholder:"https://example.com"},domProps:{value:t.fieldValue},on:{input:[function(e){e.target.composing||(t.fieldValue=e.target.value)},function(e){return t.resetValidityInfo("newUrlValue")}]}}):t._e(),"birthday"===t.fieldType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.fieldValue,expression:"fieldValue"}],ref:"newBirthdateValue",staticClass:"modal__input",attrs:{type:"date",placeholder:"Укажите дату рождения"},domProps:{value:t.fieldValue},on:{input:[function(e){e.target.composing||(t.fieldValue=e.target.value)},function(e){return t.resetValidityInfo("newBirthdateValue")}]}}):t._e(),"adress"===t.fieldType?a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.fieldValue,expression:"fieldValue"}],ref:"newAdressValue",staticClass:"modal__input",attrs:{size:"3"},domProps:{value:t.fieldValue},on:{input:[function(e){e.target.composing||(t.fieldValue=e.target.value)},function(e){return t.resetValidityInfo("newAdressValue")}]}}):t._e(),t._v(" "),a("small",{ref:"newDataFieldValueError",staticClass:"modal__error"})]),a("div",{staticClass:"modal__btnGroup"},[a("button",{staticClass:"modal__btn modal__btn--accept",attrs:{type:"submit"}},[t._v(" "+t._s("add"===t.userDataModalData.operation?"Добавить":"Изменить")+" ")]),a("button",{staticClass:"modal__btn modal__btn--decline",attrs:{type:"button"},on:{click:function(e){return t.setUserDataAns({ans:!1})}}},[t._v(" Отменить ")])])])])])},D=[],N=(a("a15b"),a("1276"),a("ac1f"),a("498a"),{name:"UserDataModal",data:function(){return{fieldType:"",fieldValue:""}},computed:Object(s["a"])({},Object(o["c"])(["userDataModalData","contactData","currentContactIndex"])),beforeMount:function(){this.fieldType="add"===this.userDataModalData.operation?"":this.userDataModalData.dataType,this.fieldValue="add"===this.userDataModalData.operation?"":this.userDataModalData.dataValue,"edit"===this.userDataModalData.operation&&"birthday"===this.userDataModalData.dataType&&(this.fieldValue=new Date(this.userDataModalData.dataValue).toLocaleDateString().split(".").reverse().join("-"))},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["setUserDataAns"])),{},{formSubmitHandler:function(){"add"===this.userDataModalData.operation?this.createDataField():this.updateDataField()},createDataField:function(){var t={value:this.fieldValue,type:this.fieldType};this.checkDataTypeValidity()&&this.checkDataValueValidity()&&this.setUserDataAns({ans:!0,formData:Object(s["a"])({},t)})},updateDataField:function(){var t=[this.checkDataTypeValidity(),this.checkDataValueValidity()];if(t.every((function(t){return t}))){var e={value:this.fieldValue,type:this.fieldType};this.setUserDataAns({ans:!0,formData:Object(s["a"])({},e)})}},resetValidityInfo:function(t){this.$refs[t].classList.remove("valid","invalid"),this.$refs.newDataFieldTypeError&&(this.$refs.newDataFieldTypeError.innerText=""),this.$refs.newDataFieldValueError&&(this.$refs.newDataFieldValueError.innerText="")},checkDataTypeValidity:function(){return!!this.fieldType.trim()||(this.$refs.newDataFieldType.classList.add("invalid"),this.$refs.newDataFieldTypeError.innerText="Выберите один из вариантов",!1)},checkDataValueValidity:function(){if("email"===this.fieldType){var t=/\S+@\S+\.\S+/,e=/^[^\s@]+@[^\s@]+$/;return this.fieldValue.trim()?t.test(this.fieldValue)&&e.test(this.fieldValue)?(this.$refs.newEmailValue.classList.add("valid"),!0):(this.$refs.newEmailValue.classList.add("invalid"),this.$refs.newDataFieldValueError.innerText="Укажите корректный E-mail",!1):(this.$refs.newEmailValue.classList.add("invalid"),this.$refs.newDataFieldValueError.innerText="Укажите E-mail",!1)}if("url"===this.fieldType){var a=/https?:\/\/[a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}/;return this.fieldValue.trim()?a.test(this.fieldValue)?(this.$refs.newUrlValue.classList.add("valid"),!0):(this.$refs.newUrlValue.classList.add("invalid"),this.$refs.newDataFieldValueError.innerText="Укажите корректный адрес веб-сайта",!1):(this.$refs.newUrlValue.classList.add("invalid"),this.$refs.newDataFieldValueError.innerText="Укажите адрес веб-сайта",!1)}return"birthday"===this.fieldType?this.fieldValue.trim()?new Date(this.fieldValue)>new Date?(this.$refs.newBirthdateValue.classList.add("invalid"),this.$refs.newDataFieldValueError.innerText="Дата не можеть быть больше текущей",!1):new Date(this.fieldValue)<new Date(-2208997817)?(this.$refs.newBirthdateValue.classList.add("invalid"),this.$refs.newDataFieldValueError.innerText="Дата не может быть ниже 1900 года",!1):(this.$refs.newBirthdateValue.classList.add("valid"),!0):(this.$refs.newBirthdateValue.classList.add("invalid"),this.$refs.newDataFieldValueError.innerText="Укажите дату рождения",!1):"adress"===this.fieldType?this.fieldValue.trim()?(this.$refs.newAdressValue.classList.add("valid"),!0):(this.$refs.newAdressValue.classList.add("invalid"),this.$refs.newDataFieldValueError.innerText="Укажите адрес",!1):void 0}}),mounted:function(){"edit"===this.userDataModalData.operation?this.$refs.dataValueInput.focus():this.$refs.newDataFieldType.focus()}}),V=N,M=Object(m["a"])(V,w,D,!1,null,null,null),j=M.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal__overlay"},[a("div",{staticClass:"modal__container"},[a("h3",{staticClass:"modal__title"},[t._v(t._s(t.customFieldsModalData.message))]),a("hr"),a("form",{staticClass:"modal__form",on:{submit:function(e){return e.preventDefault(),t.formSubmitHandler(e)}}},["add"===t.customFieldsModalData.operation?a("label",{staticClass:"modal__label"},[a("p",{staticClass:"modal__description"},[t._v("Введите название:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fieldName,expression:"fieldName"}],ref:"nameInput",staticClass:"modal__input",attrs:{type:"text",placeholder:"Название поля"},domProps:{value:t.fieldName},on:{input:[function(e){e.target.composing||(t.fieldName=e.target.value)},function(e){return t.resetValidityInfo("nameInput")}]}}),a("small",{ref:"nameInputError",staticClass:"modal__error"})]):t._e(),a("label",{staticClass:"modal__label"},["add"===t.customFieldsModalData.operation?a("p",{staticClass:"modal__description"},[t._v("Укажите значение:")]):a("h3",{staticClass:"modal__description"},[t._v(t._s(t.fieldName)+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fieldValue,expression:"fieldValue"}],ref:"valueInput",staticClass:"modal__input",attrs:{type:"text",placeholder:"Укажите значение"},domProps:{value:t.fieldValue},on:{input:[function(e){e.target.composing||(t.fieldValue=e.target.value)},function(e){return t.resetValidityInfo("valueInput")}]}}),a("small",{ref:"valueInputError",staticClass:"modal__error"})]),a("div",{staticClass:"modal__btnGroup"},[a("button",{staticClass:"modal__btn modal__btn--accept",attrs:{type:"submit"}},[t._v(" "+t._s("add"===t.customFieldsModalData.operation?"Добавить":"Изменить")+" ")]),a("button",{staticClass:"modal__btn modal__btn--decline",attrs:{type:"button"},on:{click:function(e){return t.setCustomFieldsAns({ans:!1})}}},[t._v(" Отменить ")])])])])])},T=[],g=(a("b0c0"),{name:"CustomFieldsModal",data:function(){return{fieldName:"",fieldValue:""}},computed:Object(s["a"])({},Object(o["c"])(["customFieldsModalData","contactCustomProps","currentContactIndex"])),beforeMount:function(){this.fieldName="add"===this.customFieldsModalData.operation?"":this.customFieldsModalData.fieldName,this.fieldValue="add"===this.customFieldsModalData.operation?"":this.customFieldsModalData.fieldValue},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["setCustomFieldsAns"])),{},{formSubmitHandler:function(){var t="add"===this.customFieldsModalData.operation?[this.validateName(),this.validateValue()]:[this.validateValue()];t.every((function(t){return t}))&&("add"===this.customFieldsModalData.operation?this.createField():this.updateField())},resetValidityInfo:function(t){this.$refs[t].classList.remove("valid","invalid"),this.$refs["".concat(t,"Error")].innerText=""},validateName:function(){var t=this;if(!this.fieldName.trim())return this.$refs.nameInput.classList.add("invalid"),this.$refs.nameInputError.innerText="Укажите название",!1;var e=this.contactCustomProps(this.currentContactIndex).some((function(e){return e.name===t.fieldName}));return e?(this.$refs.nameInput.classList.add("invalid"),this.$refs.nameInputError.innerText="Такое поле уже существует",!1):(this.$refs.nameInput.classList.add("valid"),!0)},validateValue:function(){return this.fieldValue.trim()?(this.$refs.valueInput.classList.add("valid"),!0):(this.$refs.valueInput.classList.add("invalid"),this.$refs.valueInputError.innerText="Укажите значение",!1)},createField:function(){var t={name:this.fieldName,value:this.fieldValue};this.setCustomFieldsAns({ans:!0,formData:Object(s["a"])({},t)})},updateField:function(){var t=this,e={name:this.fieldName,value:this.fieldValue};e.index=this.contactCustomProps(this.currentContactIndex).findIndex((function(e){return e.name===t.customFieldsModalData.fieldName})),this.setCustomFieldsAns({ans:!0,formData:Object(s["a"])({},e)})}}),mounted:function(){"add"===this.customFieldsModalData.operation?this.$refs.nameInput.focus():this.$refs.valueInput.focus()}}),x=g,L=Object(m["a"])(x,O,T,!1,null,null,null),k=L.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal__overlay"},[a("div",{staticClass:"modal__container"},[a("h2",{staticClass:"modal__title"},[t._v("Создать контакт:")]),a("hr"),a("form",{staticClass:"modal__form",on:{submit:function(e){return e.preventDefault(),t.createNewContact(e)}}},[a("label",{staticClass:"modal__label"},[a("h3",{staticClass:"modal__description"},[t._v("Введите имя:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"newContactName",staticClass:"modal__input",attrs:{type:"text",placeholder:"Введите имя"},domProps:{value:t.name},on:{input:[function(e){e.target.composing||(t.name=e.target.value)},function(e){return t.resetValidityInfo("newContactName")}]}}),a("small",{ref:"newContactNameError",staticClass:"modal__error"})]),a("label",{staticClass:"modal__label"},[a("p",{staticClass:"modal__description"},[t._v("Выберите тип номера:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.numberType,expression:"numberType"}],ref:"newContactNumberType",staticClass:"modal__input modal__select",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.numberType=e.target.multiple?a:a[0]},function(e){return t.resetValidityInfo("newContactNumberType")}]}},[a("option",{attrs:{disabled:"",value:""}},[t._v("Выберите один из вариантов")]),a("option",{attrs:{value:"mobile"}},[t._v("Мобильный")]),a("option",{attrs:{value:"work"}},[t._v("Рабочий")]),a("option",{attrs:{value:"home"}},[t._v("Домашний")]),a("option",{attrs:{value:"other"}},[t._v("Другой")])]),a("small",{ref:"newContactNumberTypeError",staticClass:"modal__error"})]),a("label",{staticClass:"modal__label"},[a("p",{staticClass:"modal__description"},[t._v("Введите номер:")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.numberValue,expression:"numberValue",modifiers:{number:!0}}],ref:"newContactNumberValue",staticClass:"modal__input",attrs:{type:"tel",placeholder:"Введите номер"},domProps:{value:t.numberValue},on:{input:[function(e){e.target.composing||(t.numberValue=t._n(e.target.value))},function(e){return t.resetValidityInfo("newContactNumberValue")}],blur:function(e){return t.$forceUpdate()}}}),a("small",{ref:"newContactNumberValueError",staticClass:"modal__error"})]),a("div",{staticClass:"modal__btnGroup"},[a("button",{staticClass:"modal__btn modal__btn--accept",attrs:{type:"submit"}},[t._v(" Добавить ")]),a("button",{staticClass:"modal__btn modal__btn--decline",attrs:{type:"button"},on:{click:function(e){return t.setNewContactAns({ans:!1})}}},[t._v(" Отменить ")])])])])])},$=[],S=(a("466d"),a("d3b7"),a("25f0"),function(t){for(var e="",a={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"zh","з":"z","и":"i","й":"y","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sch","ь":"","ы":"y","ъ":"","э":"e","ю":"yu","я":"ya"," ":"_","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"E","Ж":"Zh","З":"Z","И":"I","Й":"Y","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sch","Ь":"","Ы":"Y","Ъ":"","Э":"E","Ю":"Yu","Я":"Ya"},n=0;n<t.length;++n)void 0===a[t[n]]?e+=t[n]:e+=a[t[n]];return e}),F=S,E={name:"NewContactModal",data:function(){return{name:"",numberType:"",numberValue:""}},computed:Object(s["a"])({},Object(o["c"])(["contactsList"])),methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["setNewContactAns"])),{},{createNewContact:function(){var t=[this.checkNameValidity(),this.checkNumberTypeValidity(),this.checkNumberValueValidity()];if(t.every((function(t){return t}))){var e={name:this.name,numberType:this.numberType,numberValue:this.numberValue};this.setNewContactAns({ans:!0,formData:Object(s["a"])({},e)})}},resetValidityInfo:function(t){this.$refs[t].classList.remove("valid","invalid"),this.$refs["".concat(t,"Error")].innerText=""},checkNameValidity:function(){var t=this;if(!this.name.trim())return this.$refs.newContactName.classList.add("invalid"),this.$refs.newContactNameError.innerText="Поле не должно быть пустым",!1;var e=this.contactsList.some((function(e){return e.name===t.name})),a=this.contactsList.some((function(e){return e.linkto==="/".concat(F(t.name))}));return e||a?(this.$refs.newContactName.classList.add("invalid"),this.$refs.newContactNameError.innerText="Такой контакт уже существует",!1):(this.$refs.newContactName.classList.add("valid"),!0)},checkNumberTypeValidity:function(){return this.numberType?(this.$refs.newContactNumberType.classList.add("valid"),!0):(this.$refs.newContactNumberType.classList.add("invalid"),this.$refs.newContactNumberTypeError.innerText="Выберите одно из значений",!1)},checkNumberValueValidity:function(){return this.numberValue.toString().match("[0-9]{5,}")?(this.$refs.newContactNumberType.classList.add("valid"),!0):(this.$refs.newContactNumberValue.classList.add("invalid"),this.$refs.newContactNumberValueError.innerText="Номер должен собержать не менее 5 цифр",!1)}}),mounted:function(){this.$refs.newContactName.focus()}},A=E,P=Object(m["a"])(A,I,$,!1,null,null,null),U=P.exports,B=(a("4dd0"),{data:function(){return{isMobile:!1}},computed:Object(s["a"])({},Object(o["c"])(["confirmModalData","phoneNumberModalData","userDataModalData","customFieldsModalData","newContactModalData"])),components:{ConfirmModal:b,PhoneNumberModal:C,UserDataModal:j,CustomFieldsModal:k,NewContactModal:U},beforeMount:function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(this.isMobile=!0)},updated:function(){if(this.isMobile){var t=document.querySelector(".modal__container");t&&(t.style="margin-top: 1rem")}}}),H=B,z=(a("5c0b"),Object(m["a"])(H,r,i,!1,null,null,null)),G=z.exports,Y=(a("3ca3"),a("ddb0"),a("8c4f")),Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contactsList"},[a("header",{staticClass:"contactsList__header"},[a("h1",{staticClass:"contactsList__title"},[t._v("Список контактов")]),a("button",{staticClass:"contactsList__btn contactsList__btn--add",attrs:{title:"Добавить контакт"},on:{click:function(e){return t.createContact()}}},[t._v(" Добавить контакт ")])]),a("hr"),a("ul",{staticClass:"contactsList__list",on:{touchstart:t.addHover,touchend:t.removeHover}},t._l(t.contactsList,(function(e){return a("li",{key:e.name,staticClass:"contactsList__item item"},[a("router-link",{staticClass:"item__title",attrs:{to:e.linkto,contact:e,title:"Перейти к контакту"}},[a("h2",[t._v(t._s(e.name))])]),a("button",{staticClass:"item__btn item__btn--remove",attrs:{title:"Удалить контакт"},on:{click:function(a){return t.removeContact(e)}}},[t._v(" × ")])],1)})),0)])},q=[],J={name:"ContactsList",computed:Object(o["c"])(["contactsList"]),methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["removeContact","createContact","selectContact"])),{},{addHover:function(t){t.target.classList.contains("contactsList__item")&&t.target.classList.add("hover")},removeHover:function(t){t.target.classList.contains("contactsList__item")&&t.target.classList.remove("hover")}}),mounted:function(){this.selectContact(-1)}},K=J,R=Object(m["a"])(K,Z,q,!1,null,null,null),Q=R.exports;n["a"].use(Y["a"]);var W=[{path:"/",name:"ContactsList",component:Q},{path:"/:name",name:"Contact",component:function(){return a.e("chunk-0c1a0464").then(a.bind(null,"b8fa"))},props:!0}],X=new Y["a"]({mode:"history",base:"/contact-book/",routes:W}),tt=X,et={contactsList:[{name:"Мама",linkto:"/mama",numbers:{mobile:89991234567,work:null,home:89666666666,others:[89119876543]},data:{email:"test@test.com",url:null,birthday:new Date(0),adress:"г. Москва, ул. Пушкина 1"},custom:[{name:"Custom1",value:"Custom value 1"},{name:"Custom2",value:"Custom value 2"}],prevState:null},{name:"Папа",linkto:"/papa",numbers:{mobile:89991234567,work:null,home:null,others:[1234567,89099090990]},data:{email:null,url:null,birthday:new Date(432e6),adress:null},custom:[],prevState:null}],currentContactIndex:-1,confirmModal:{visibility:!1,message:"",callback:null},phoneNumberModal:{visibility:!1,operation:"",message:"",numberType:null,number:null,callback:null},userDataModal:{visibility:!1,operation:"",message:"",dataType:null,dataValue:null,callback:null},customFieldsModal:{visibility:!1,operation:"",message:"",fieldName:null,fieldValue:null,callback:null},newContactModal:{visibility:!1}},at=a("53ca"),nt=(a("7db0"),{createContact:function(t){var e=t.commit;e("newContactModalShow")},selectContact:function(t,e){var a=t.commit;a("setContactIndex",e)},removeContact:function(t,e){var a=t.commit;a("confirmModalShow",{msg:'Удалить контакт "'.concat(e.name,'"?'),callback:function(){a("removeContactFromList",e)}})},editNumber:function(t,e){var a=t.commit,n=t.state,r=n.contactsList[n.currentContactIndex].numbers,i=Object.entries(r).find((function(t){return t[1]===e}));if("object"===Object(at["a"])(i))a("phoneNumberModalShow",{operation:"edit",message:"Изменить номер",number:i[1],numberType:i[0],callback:function(t){return a("updateNumber",Object(s["a"])({},t))}});else{if(i)return;a("phoneNumberModalShow",{operation:"edit",message:"Изменить номер",number:e,numberType:"other",callback:function(t){return a("updateNumber",Object(s["a"])({},t))}})}},removeNumber:function(t,e){var a=t.commit,n=t.state,r=n.contactsList[n.currentContactIndex].numbers,i=Object.entries(r).find((function(t){return t[1]===e}));if("object"===Object(at["a"])(i))a("confirmModalShow",{msg:'Удалить номер "'.concat(e,'"?'),callback:function(){a("removeSelectedNumber",{title:i[0],number:e})}});else{if(i)return;var s=r.others.findIndex((function(t){return t===e}));a("confirmModalShow",{msg:'Удалить номер "'.concat(e,'"?'),callback:function(){return a("removeSelectedNumber",{title:s,number:e})}})}},addNumber:function(t){var e=t.commit;e("phoneNumberModalShow",{operation:"add",message:"Добавить номер",callback:function(t){e("addNewNumber",Object(s["a"])({},t))}})},editDataField:function(t,e){var a=t.commit,n=t.state,r=n.contactsList[n.currentContactIndex].data,i=Object.entries(r).find((function(t){return t[1]===e}));a("userDataModalShow",{operation:"edit",message:"Изменить поле",dataType:i[0],dataValue:i[1],callback:function(t){a("updateDataField",Object(s["a"])({},t))}})},removeDataField:function(t,e){var a=t.commit,n=t.state,r=n.contactsList[n.currentContactIndex].data,i=Object.entries(r).find((function(t){return t[1]===e}));a("confirmModalShow",{msg:"Удалить выбранное поле?",callback:function(){a("removeSelectedDataField",{title:i[0]})}})},addDataField:function(t){var e=t.commit;e("userDataModalShow",{operation:"add",message:"Добавить поле",callback:function(t){e("addNewData",Object(s["a"])({},t))}})},editCustomProp:function(t,e){var a=t.commit;a("customFieldsModalShow",{operation:"edit",message:"Редактировать поле",fieldName:e.name,fieldValue:e.value,callback:function(t){a("updateCustomProp",Object(s["a"])({},t))}})},removeCustomProp:function(t,e){var a=t.commit;a("confirmModalShow",{msg:'Удалить поле "'.concat(e,'"?'),callback:function(){a("removeSelectedCustomProp",e)}})},addCustomProp:function(t){var e=t.commit;e("customFieldsModalShow",{operation:"add",message:"Добавить поле",callback:function(t){e("addNewCustomProp",Object(s["a"])({},t))}})},revertLastChange:function(t){var e=t.commit;e("confirmModalShow",{msg:"Вернуть последнее изменение?",callback:function(){e("revertLastChange")}})},setConfirmModalAns:function(t,e){var a=t.commit;a("confirmModalSetAnswer",e)},setPhoneNumberAns:function(t,e){var a=t.commit;a("phoneNumberSetAnswer",{ans:e.ans,formData:e.formData})},setUserDataAns:function(t,e){var a=t.commit;a("userDataSetAnswer",{ans:e.ans,formData:e.formData})},setCustomFieldsAns:function(t,e){var a=t.commit;a("customFieldsSetAnswer",{ans:e.ans,formData:e.formData})},setNewContactAns:function(t,e){var a=t.commit;a("addNewContact",{ans:e.ans,formData:e.formData})}}),rt=a("ade3"),it=a("3835"),st=a("2909"),ot=a("d4ec"),lt=(a("99af"),a("4de4"),a("d81d"),function(t){var e=t.currentContactIndex,a=t.contactsList[e];return a.prevState=Object(s["a"])(Object(s["a"])({},t.contactsList[e]),{},{prevState:null}),a.prevState.numbers=Object(s["a"])({},t.contactsList[e].numbers),a.prevState.numbers.others=Object(st["a"])(t.contactsList[e].numbers.others),a.prevState.data=Object(s["a"])({},t.contactsList[e].data),a.prevState.custom=Object(st["a"])(t.contactsList[e].custom.map((function(t){return Object(s["a"])({},t)}))),[a,e]}),ct=function t(e){Object(ot["a"])(this,t),this.name=e,this.numbers={mobile:null,work:null,home:null,others:[]},this.data={email:null,url:null,birthday:null,adress:null},this.custom=[],this.prevState=null,this.linkto="/".concat(F(this.name))},ut={addNewContact:function(t,e){var a=e.ans,n=e.formData;if(!0===a){var r=new ct(n.name);"other"===n.numberType?r.numbers.others[0]=n.numberValue:r.numbers[n.numberType]=n.numberValue,t.contactsList=[].concat(Object(st["a"])(t.contactsList),[Object(s["a"])({},r)])}t.newContactModal={visibility:!1}},setContactIndex:function(t,e){t.currentContactIndex=-1===e?-1:t.contactsList.findIndex((function(t){return t.name===e.name}))},removeContactFromList:function(t,e){t.contactsList=Object(st["a"])(t.contactsList.filter((function(t){return t.name!==e.name})))},updateNumber:function(t,e){var a=lt(t),n=Object(it["a"])(a,1),r=n[0];if("other"===e.type){var i=Object(st["a"])(r.numbers.others);i[e.index]=e.number,r.numbers.others=Object(st["a"])(i)}else r.numbers[e.type]=e.number},removeSelectedNumber:function(t,e){var a=lt(t),n=Object(it["a"])(a,1),r=n[0];"string"===typeof e.title?r.numbers=Object(s["a"])(Object(s["a"])({},r.numbers),{},Object(rt["a"])({},e.title,null)):"number"===typeof e.title&&(r.numbers.others=Object(st["a"])(r.numbers.others).filter((function(t){return t!=e.number})))},addNewNumber:function(t,e){var a=lt(t),n=Object(it["a"])(a,1),r=n[0];if("other"===e.type)r.numbers.others=[].concat(Object(st["a"])(r.numbers.others),[e.number]);else{var i=Object(s["a"])({},r.numbers);i[e.type]=e.number,r.numbers=Object(s["a"])({},i)}},updateDataField:function(t,e){var a=lt(t),n=Object(it["a"])(a,1),r=n[0];r.data[e.type]=e.value},removeSelectedDataField:function(t,e){var a=lt(t),n=Object(it["a"])(a,1),r=n[0];r.data=Object(s["a"])(Object(s["a"])({},r.data),{},Object(rt["a"])({},e.title,null))},addNewData:function(t,e){var a=lt(t),n=Object(it["a"])(a,1),r=n[0],i=Object(s["a"])(Object(s["a"])({},r.data),{},Object(rt["a"])({},e.type,e.value));r.data=Object(s["a"])({},i)},updateCustomProp:function(t,e){var a=lt(t),n=Object(it["a"])(a,1),r=n[0],i=Object(st["a"])(r.custom);i[e.index]={name:e.name,value:e.value},r.custom=Object(st["a"])(i)},removeSelectedCustomProp:function(t,e){var a=lt(t),n=Object(it["a"])(a,1),r=n[0];r.custom=Object(st["a"])(r.custom.filter((function(t){return t.name!==e})))},addNewCustomProp:function(t,e){var a=lt(t),n=Object(it["a"])(a,1),r=n[0];r.custom.push({name:e.name,value:e.value})},revertLastChange:function(t){var e=t.currentContactIndex,a=t.contactsList[e],n=Object(s["a"])({},a.prevState);n.prevState=null,n.numbers=Object(s["a"])({},a.prevState.numbers),n.numbers.others=Object(st["a"])(a.prevState.numbers.others),n.data=Object(s["a"])({},a.prevState.data),n.custom=Object(st["a"])(a.prevState.custom.map((function(t){return Object(s["a"])({},t)}))),t.contactsList=Object(st["a"])(t.contactsList.map((function(e,a){return a===t.currentContactIndex?n:e})))},confirmModalShow:function(t,e){t.confirmModal={visibility:!0,message:e.msg,callback:e.callback}},confirmModalSetAnswer:function(t,e){!0===e&&t.confirmModal.callback(),t.confirmModal={visibility:!1,message:"",callback:null}},phoneNumberModalShow:function(t,e){t.phoneNumberModal={visibility:!0,operation:e.operation,message:e.message,number:e.number,numberType:e.numberType,callback:e.callback}},phoneNumberSetAnswer:function(t,e){!0===e.ans&&t.phoneNumberModal.callback(e.formData),t.phoneNumberModal={visibility:!1,operation:"",message:"",number:null,numberType:null,callback:null}},userDataModalShow:function(t,e){t.userDataModal={visibility:!0,operation:e.operation,message:e.message,dataType:e.dataType,dataValue:e.dataValue,callback:e.callback}},userDataSetAnswer:function(t,e){!0===e.ans&&t.userDataModal.callback(e.formData),t.userDataModal={visibility:!1,operation:"",message:"",dataType:null,dataValue:null,callback:null}},customFieldsModalShow:function(t,e){t.customFieldsModal={visibility:!0,operation:e.operation,message:e.message,fieldName:e.fieldName,fieldValue:e.fieldValue,callback:e.callback}},customFieldsSetAnswer:function(t,e){!0===e.ans&&t.customFieldsModal.callback(e.formData),t.customFieldsModal={visibility:!1,operation:"",message:"",fieldName:null,fieldValue:null,callback:null}},newContactModalShow:function(t){t.newContactModal={visibility:!0}}},dt={contactsList:function(t){return t.contactsList},currentContactIndex:function(t){return t.currentContactIndex},contactNumbers:function(t){return function(e){return t.contactsList[e].numbers}},contactData:function(t){return function(e){return t.contactsList[e].data}},contactCustomProps:function(t){return function(e){return t.contactsList[e].custom}},confirmModalData:function(t){return t.confirmModal},phoneNumberModalData:function(t){return t.phoneNumberModal},userDataModalData:function(t){return t.userDataModal},customFieldsModalData:function(t){return t.customFieldsModal},newContactModalData:function(t){return t.newContactModal}};n["a"].use(o["a"]);var mt=new o["a"].Store({state:Object(s["a"])({},et),actions:Object(s["a"])({},nt),mutations:Object(s["a"])({},ut),getters:Object(s["a"])({},dt)});n["a"].config.productionTip=!1,new n["a"]({router:tt,store:mt,render:function(t){return t(G)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";a("9c0c")},"9c0c":function(t,e,a){}});
//# sourceMappingURL=app.afffedc4.js.map